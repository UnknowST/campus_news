
<div id="body">

    <div id="title"></div>
    <div id="info"></div>
    <div id="likes"></div>
    <div id="content"></div>
    <div id="file" style="display: none">
        <p id="p1"><span>附件：</span><span id="sp3"></span></p>
    </div>
</div>
<script type="text/javascript">
    layui.use(['layer'], function () {
        var $=layui.jquery,
            layer=layui.layer;
        var newsdata=parent.newsdata;


        var title='<h1>'+newsdata.title+'</h1>'
        $("#title").append(title)
        var info='<spanp id="sp1">作者：'+newsdata.author+'&nbsp&nbsp&nbsp&nbsp&nbsp日期：'+newsdata.time+'</spanp>'
        $("#info").append(info)
        $("#content").append(newsdata.content)
        var likes='<span id="sp2">点赞数：'+newsdata.likes_number+'&nbsp&nbsp&nbsp&nbsp&nbsp'+'收藏数：'+newsdata.collections_number+'</span>'
        $("#likes").append(likes)
        if(newsdata.news_id!=null){
            $("#file").css({"display":"block"})
            $("#sp3").append('<a id="a1" href="javascript:void(0)">'+newsdata.name+'</a>')
        }
        $("#a1").click(function () {
            alert("123")
            // $.ajax({
            //     url:'../admin/getfile',
            //     data:{"path":newsdata.path,"name":newsdata.name},
            //     method:'POST',
            //     async:true,
            //     success:(res)=>{
            //         if(res.flag==0)
            //             layer.msg(res.message)
            //     }
            // })
            console.log("ajaxDownloadSynchronized");
            var url = "http://localhost:8085/admin/getfile";
            var name = newsdata.name;
            var path = newsdata.path;
            var form = $("<form></form>").attr("action", url).attr("method", "post");
            form.append($("<input></input>").attr("type", "hidden").attr("name", "name").attr("value", name));
            form.append($("<input></input>").attr("type", "hidden").attr("name", "path").attr("value", path));
            form.appendTo('body').submit().remove();

        })


    });

</script>



